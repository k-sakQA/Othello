# 仕様書の配置方法

このフォルダに仕様書を配置すると、Othelloが自動的に読み込んでテスト分析を実行します。

## 📁 対応フォーマット

- **Markdown** (`.md`) ✅ 推奨
- **テキスト** (`.txt`) ✅
- **PDF** (`.pdf`) ⏳ 今後対応予定
- **Word** (`.docx`) ⏳ 今後対応予定

## 📝 仕様書の書き方

### 推奨構成

```markdown
# システム名 仕様書

## 1. 概要
システムの目的と概要を記載

## 2. 機能仕様

### 2.1 機能名

**URL**: システムのURL

**画面レイアウト**:
- 入力項目の説明
- ボタン・リンクの説明

**入力仕様**:
- フィールド名: 入力形式、文字数制限
- 必須/任意の区別

**バリデーション**:
- エラー条件
- エラーメッセージ

**画面遷移**:
- 次画面への遷移条件

## 3. 非機能要件
- ユーザビリティ
- レスポンシブデザイン
- アクセシビリティ
```

### 実例: ホテル予約システム

このフォルダの `hotel-reservation-spec.md` を参考にしてください。

## 🎯 テスト観点との対応

Othelloは、仕様書と `config/test-ViewpointList-simple.csv` のテスト観点リストを組み合わせてテスト分析を行います。

**テスト観点リスト（抜粋）:**
1. 表示（UI） - レイアウト/文言
2. 表示（UI） - エラー表示
3. 入力 - 文字種
4. 入力 - 文字数（正常値）
5. 入力 - 文字数（異常値）
6. 動作確認 - 単機能
7. 状態遷移
8. 画面遷移

**Plannerの動作:**
```
仕様書: 「氏名は全角文字、1～50文字」
観点4: 「文字数（正常値）」

→ テストケース生成:
  - 氏名に1文字入力して送信
  - 氏名に50文字入力して送信
```

## 🔄 複数ファイル対応

複数の仕様書を配置すると、自動的に結合されます：

```
spec/
├── functional-spec.md     # 機能仕様
├── ui-design.md           # UI設計
├── validation-rules.txt   # バリデーションルール
└── api-spec.md            # API仕様
```

すべてのファイルが読み込まれ、Plannerに渡されます。

## ⚠️ 注意事項

### 仕様書がない場合

仕様書がない場合、Othelloは自動的に**サイト探索モード**で動作します：

```
⚠️  spec/フォルダに仕様書が見つかりません。サイト探索モードで動作します。
```

サイト探索モードでは、Plannerが対象URLを見ながらテスト分析を行います。

### トークン制限

仕様書が非常に大きい場合、LLMのトークン制限に達する可能性があります。

**対策:**
- 仕様書を複数ファイルに分割（機能ごと）
- テスト対象機能に関連する仕様書のみを配置
- 不要な詳細情報を削除

### 仕様書の更新

仕様書を更新した場合、次回のOthello実行時に自動的に反映されます。

## 💡 ベストプラクティス

### 1. 具体的に記述

```markdown
❌ 悪い例:
- 入力フォームがある

✅ 良い例:
- 氏名（必須）: 全角文字、1～50文字
- メールアドレス（必須）: RFC 5322準拠
- 電話番号（任意）: 数字とハイフン、10～13桁
```

### 2. エラーケースを明記

```markdown
✅ バリデーション:
- 氏名が空の場合: 「このフィールドを入力してください。」
- 氏名が51文字以上: 「50文字以内で入力してください。」
- 氏名に半角文字: 「全角文字で入力してください。」
```

### 3. 画面遷移を明確に

```markdown
✅ 画面遷移:
入力画面 → 確認画面 → 完了画面

遷移条件:
- 入力画面で「確認」ボタンクリック（すべての必須項目入力済み）
- 確認画面で「送信」ボタンクリック
```

## 🚀 実行方法

```bash
# 仕様書を配置
cp your-spec.md spec/

# Othello実行
node bin/othello.js --url https://your-site.com

# レポート確認
cat reports/final-report.json
```

## 📊 期待される効果

仕様書ベースのテスト分析により、以下の効果が期待できます：

- ✅ **テストの網羅性向上**: 仕様書の内容をもとにテストケースを生成
- ✅ **テストの正確性向上**: 仕様書で定義された期待値を使用
- ✅ **メンテナンス性向上**: 仕様変更時は仕様書を更新するだけ
- ✅ **ドキュメント駆動**: 仕様書がテストの基盤となる

## 🔗 参考

- [サンプル仕様書](./hotel-reservation-spec.md)
- [テスト観点リスト](../config/test-ViewpointList-simple.csv)
- [Othello README](../README.md)
